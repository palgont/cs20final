<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title> Google Sign-In</title>
  <meta name="google-signin-client_id" content="1034974765274-v2jn8j3aspv0su2djib7okbpvt4das2a.apps.googleusercontent.com">
  <script src="https://apis.google.com/js/platform.js?onload=initClient" async defer></script>
  <script>
    let auth2;

    // Called automatically after gapi loads
    function initClient() {
      gapi.load('auth2', function () {
        auth2 = gapi.auth2.init({
          client_id: '1034974765274-v2jn8j3aspv0su2djib7okbpvt4das2a.apps.googleusercontent.com',
          cookiepolicy: 'single_host_origin'
        });

        // Attach the sign-in event to your button here
        const signInBtn = document.getElementById('googleSignInBtn');
        if (signInBtn) {
          signInBtn.addEventListener('click', function () {
            auth2.signIn().then(function (googleUser) {
              const profile = googleUser.getBasicProfile();
              console.log("Name:", profile.getName());
              console.log("Email:", profile.getEmail());

              const id_token = googleUser.getAuthResponse().id_token;

              // Send token to server (optional)
              fetch('/tokensignin', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({ id_token }),
              });
            });
          });
        }
      });
    }
  </script>
</head>
<body>
  <h2>Sign in with Google</h2>
  <button id="googleSignInBtn">Sign in with Google</button>
</body>
</html>
